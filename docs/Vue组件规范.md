# Vue组件规范

## 单文件组件.vue

> 只有 template 和 script。

```vue
<template>
  <div class="cf-todo-item"><div>
</template>
<script>
export default {
  name: 'TodoItem',
  // ...
}
</script>
```

## 组件/实例的选项的顺序

> 组件/实例的选项应该有统一的顺序，方便组件的修改和养成一致的书写习惯。

1. 副作用 (触发组件外的影响)
    - el
2. 全局感知 (要求组件以外的知识)
    - name
    - parent
3. 组件类型 (更改组件的类型)
    - functional
4. 模板修改器 (改变模板的编译方式)
    - delimiters
    - comments
5. 模板依赖 (模板内使用的资源)
    - components
    - directives
    - filters
6. 组合 (向选项里合并属性)
    - extends
    - mixins
7. 接口 (组件的接口)
    - inheritAttrs
    - model
    - props/propsData
8. 本地状态 (本地的响应式属性)
    - data
    - computed
9. 事件 (通过响应式事件触发的回调)
    - watch
10. 生命周期钩子 (按照它们被调用的顺序)
    - beforeCreate
    - created
    - beforeMount
    - mounted
    - beforeUpdate
    - updated
    - activated
    - deactivated
    - beforeDestroy
    - destroyed
11. 非响应式的属性 (不依赖响应系统的实例属性)
    - methods
12. 渲染 (组件输出的声明式描述)
    - template/render
    - renderError

## 元素特性的顺序

> 元素 (包括组件) 的特性应该有统一的顺序。

1. 所有除了下面的元素特性
2. 所有普通的绑定或未绑定的特性
  v-bind(:)
3. 事件 (组件事件监听器)
  v-on(@)

## 组件名为多个单词

> 组件名应该始终是多个单词的，根组件 `App` 除外。

这样做可以避免跟现有的以及未来的 HTML 元素[相冲突](http://w3c.github.io/webcomponents/spec/custom/#valid-custom-element-name)，因为所有的 HTML 元素名称都是单个单词的。

## 组件数据

> 组件的 `data` 必须是一个函数。

当在组件中使用 `data` 属性的时候 (除了 `new Vue` 外的任何地方)，它的值必须是返回一个对象的函数。

## Prop 定义

> Prop 定义应该尽量详细。

在你提交的代码中，prop 的定义应该尽量详细，至少需要指定其类型。

## 为 v-for 设置键值

> 总是用 `key` 配合 `v-for`。

在组件上*总是*必须用 `key` 配合 `v-for`，以便维护内部组件及其子树的状态。甚至在元素上维护可预测的行为，比如动画中的[对象固化 (object constancy)](https://bost.ocks.org/mike/constancy/)，也是一种好的做法。

## 避免 v-if 和 v-for 用在一起

> 永远不要把 `v-if` 和 `v-for` 同时用在同一个元素上。

一般我们在两种常见的情况下会倾向于这样做：

- 为了过滤一个列表中的项目 (比如 `v-for="user in users" v-if="user.isActive"`)。在这种情形下，请将 `users` 替换为一个计算属性 (比如 `activeUsers`)，让其返回过滤后的列表。

- 为了避免渲染本应该被隐藏的列表 (比如 `v-for="user in users" v-if="shouldShowUsers"`)。这种情形下，请将 `v-if` 移动至容器元素上 (比如 `ul`, `ol`)。

## 私有属性名

> 在插件、混入等扩展中始终为自定义的私有属性使用 `$_` 前缀。并附带一个命名空间以回避和其它作者的冲突 (比如 `$_yourPluginName_`)。

Vue 使用 `_` 前缀来定义其自身的私有属性，所以使用相同的前缀 (比如 `_update`) 有覆写实例属性的风险。即便你检查确认 Vue 当前版本没有用到这个属性名，也不能保证和将来的版本没有冲突。

对于 `$` 前缀来说，其在 Vue 生态系统中的目的是暴露给用户的一个特殊的实例属性，所以把它用于*私有*属性并不合适。

不过，我们推荐把这两个前缀结合为 `$_`，作为一个用户定义的私有属性的约定，以确保不会和 Vue 自身相冲突。

## 组件文件

> 只要有能够拼接文件的构建系统，就把每个组件单独分成文件。

当你需要编辑一个组件或查阅一个组件的用法时，可以更快速的找到它。

## 单文件组件文件的大小写

> 单文件组件的文件名应该始终是单词大写开头 (PascalCase)。组件文件夹的文件夹命名也是PascalCase，里面的默认组件命名为index.vue。

单词大写开头对于代码编辑器的自动补全最为友好，因为这使得我们在 JS(X) 和模板中引用组件的方式尽可能的一致。

## 紧密耦合的组件名

> 和父组件紧密耦合的子组件应该以父组件名作为前缀命名。

如果一个组件只在某个父组件的场景下有意义，这层关系应该体现在其名字上。因为编辑器通常会按字母顺序组织文件，所以这样做可以把相关联的文件排在一起。

## 组件名中的单词顺序

组件名应该以高级别的 (通常是一般化描述的) 单词开头，以描述性的修饰词结尾。

## 模板中的组件名大小写

在单文件组件、字符串模板和 DOM 模板中组件名应该总是 kebab-case 的，e.g. `<my-component></my-component>`。

## JS/JSX 中的组件名大小写

JS/JSX 中的组件名应该始终是 PascalCase 的。

## 完整单词的组件名

> 组件名应该倾向于完整单词而不是缩写。

编辑器中的自动补全已经让书写长命名的代价非常之低了，而其带来的明确性却是非常宝贵的。不常用的缩写尤其应该避免。

## Prop 名大小写

> 在声明 prop 的时候，其命名应该始终使用 camelCase，而在模板和 JSX 中应该始终使用 kebab-case。

我们单纯的遵循每个语言的约定。在 JavaScript 中更自然的是 camelCase。而在 HTML 中则是 kebab-case。

## 多个特性的元素

> 多个特性的元素应该分多行撰写，每个特性一行。

在 JavaScript 中，用多行分隔对象的多个属性是很常见的最佳实践，因为这样更易读。模板和 JSX 值得我们做相同的考虑。

## 模板中简单的表达式

> 组件模板应该只包含简单的表达式，复杂的表达式则应该重构为计算属性或方法。

复杂表达式会让你的模板变得不那么声明式。我们应该尽量描述应该出现的是什么，而非如何计算那个值。
而且计算属性和方法使得代码可以重用。

## 指令缩写

指令缩写 (用 `:` 表示 `v-bind:` 和用 `@` 表示 `v-on:`)。

## 事件方法

事件方法统一加 `handle` 作为前缀，e.g. `handleScroll`。